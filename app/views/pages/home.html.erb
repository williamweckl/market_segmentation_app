<div ng-controller="AppCtrl" layout="column" style="height:100%;" ng-cloak>
  <section layout="row" flex>
    <md-content flex ng-controller="ContactsCtrl" ng-click="closeFilters()">
      <md-toolbar>
        <div class="md-toolbar-tools">
          <h2>
            <span>Contatos</span>
          </h2>
          <span flex></span>
          <md-button class="md-icon-button" hide-gt-md aria-label="Filtros" ng-click="toggleFilters(); $event.stopPropagation();">
            <md-icon md-svg-icon="filter.svg"></md-icon>
          </md-button>
        </div>
      </md-toolbar>

      <md-list ng-if="!listVars.loading" ng-cloak>
        <md-list-item class="md-3-line" ng-repeat="contact in contacts track by contact.id">
          <div class="md-list-item-text" layout="column">
            <h3>{{contact.name}}</h3>
            <h4>{{contact.email}}</h4>
            <p>{{contact.position.name}}</p>
            <p>{{contact.age}} - {{contact.state.name}}</p>
          </div>
          <md-divider ng-if="!$last"></md-divider>
        </md-list-item>
      </md-list>
      <div layout="row" layout-sm="column" layout-align="space-around" ng-if="listVars.loading || listVars.moreContactsloading">
        <md-progress-circular md-mode="indeterminate"></md-progress-circular>
      </div>
      <div layout="row" layout-sm="column" layout-align="center center" ng-if="!listVars.end && !(listVars.loading || listVars.moreContactsloading)">
        <md-button ng-click="getMoreContacts(); $event.stopPropagation();" class="md-primary">Mais contatos</md-button>
      </div>
    </md-content>
    <md-sidenav class="md-sidenav-right"
                md-component-id="filters"
                md-is-locked-open="$mdMedia('gt-md')"
                md-disable-backdrop
                md-whiteframe="4">
      <md-toolbar class="md-theme-indigo">
        <h1 class="md-toolbar-tools">Filtrar</h1>
      </md-toolbar>
      <md-content layout-padding ng-controller="FiltersCtrl">
        <p hide-md show-gt-md>
          This sidenav is locked open on your device. To go back to the default behavior,
          narrow your display.
        </p>
      </md-content>
    </md-sidenav>
  </section>
</div>